{# templates/stock/partials/product_form_modal.html #}
{# ========================================================================== #}
{# FORMULARIO DE EDICIÓN RÁPIDA DE PRODUCTO (MODAL)                           #}
{# ========================================================================== #}
{# Esta plantilla renderiza el formulario de edición de un producto dentro    #}
{# de una ventana modal. A diferencia del formulario completo de página       #}
{# completa, este está optimizado para ajustes rápidos.                       #}
{#                                                                            #}
{# Características:                                                           #}
{# 1. Exclusión Lógica: Oculta el campo de búsqueda (usado solo en creación). #}
{# 2. Soporte de Widgets: Carga los assets necesarios (JS/CSS) para campos    #}
{#    especiales como Select2.                                                #}
{# 3. Envío Asíncrono: Utiliza 'submitModalForm' para guardar sin recargar.   #}
{# ========================================================================== #}

<div class="modal-header">
    <h5 class="modal-title">Editar Producto</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<form method="post" action="{{ request.path }}" onsubmit="return submitModalForm(this)">
    {% csrf_token %}
    <div class="modal-body">
        {{ form.media }}

        {% for field in form %}
            {% if field.name != 'busqueda_producto' %}
            <div class="mb-3">
                <label for="{{ field.id_for_label }}" class="form-label fw-bold">{{ field.label }}</label>
                {{ field }}
            </div>
            {% endif %}
        {% endfor %}
    </div>
    
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
    </div>
</form>